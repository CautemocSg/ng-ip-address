!function(){"use strict";function a(){return{restrict:"A",require:"?ngModel",scope:{config:"=?ngIpConfig"},link:function(a,b,c,d){function n(a){a?(f="boolean"==typeof a.requirePort&&a.requirePort,e=f||"boolean"==typeof a.allowPort&&a.allowPort):(e=!1,f=!1),e||!d.$viewValue?d.$parsers[0](d.$viewValue):d.$setViewValue(d.$viewValue.replace(k,""))}function o(a){17==a.which&&(g=!1)}function p(a){console.log(a.which),17==a.which&&(g=!0),!g||86!=a.which&&67!=a.which&&118!=a.which&&99!=a.which?(a.which<46&&0!==a.which&&8!=a.which&&37!=a.which&&39!=a.which&&13!=a.which||47==a.which||a.which>58||58==a.which&&!e)&&a.preventDefault():console.log("doneeeeee")}function q(a){if(!a)return d.$setValidity("ipAddress",!0),a;m=b[0].selectionStart;var c=!0,g=null;a=a.replace(i,""),a=a.replace(j,".");var n=a.split("."),o=n.length;o<4?c=!1:o>4&&(n.length=4,o=4);for(var p=0;p<o;p++){var q=n[p];if(e)if(p<3)q=q.replace(k,"");else if(q=q.replace(l,""),-1!=q.indexOf(":")){var r=q.split(":");q=r[0],g=r[1].replace(h,"").substring(0,5),(!g||g>65535)&&(c=!1)}else f&&(c=!1);q.length>1?(q=q.replace(h,"").substring(0,3))>255&&(c=!1):q||(c=!1),n[p]=q}return a=n.join("."),null!==g&&(a+=":"+g),d.$setValidity("ipAddress",c),d.$setViewValue(a),d.$render(),b[0].setSelectionRange(m,m),a}if(d){var e=!1,f=!1,g=!0,h=new RegExp("^0","g"),i=new RegExp("^\\.","g"),j=new RegExp("\\.\\.+","g"),k=new RegExp(":","g"),l=new RegExp("^:","g"),m=0;a.$watchCollection("config",n),b.bind("keypress",p),b.bind("keyup",o),d.$parsers.push(q)}}}}angular.module("ng-ip-address",[]).directive("ngIpAddress",a)}();