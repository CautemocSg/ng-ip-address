!function(){"use strict";function e(){return{restrict:"A",require:"?ngModel",scope:{config:"=?ngIpConfig"},link:function(e,i,n,r){function t(e){e?(s="boolean"==typeof e.requirePort&&e.requirePort,o=s||"boolean"==typeof e.allowPort&&e.allowPort):(o=!1,s=!1),o||!r.$viewValue?r.$parsers[0](r.$viewValue):r.$setViewValue(r.$viewValue.replace(g,""))}function l(e){17!=e.which&&91!=e.which||(v=!0)}function c(e){17!=e.which&&91!=e.which||(v=!1)}function a(e){(e.which<46&&0!==e.which&&8!=e.which&&13!=e.which||47==e.which||58==e.which&&!o||e.which>58&&(!v||99!=e.which&&118!=e.which&&120!=e.which))&&e.preventDefault()}function h(e){if(!e)return r.$setValidity("ipAddress",!0),e;d=i[0].selectionStart;var n=!0,t=null;e=e.replace(p,""),e=e.replace(w,".");var l=e.split("."),c=l.length;c<4?n=!1:c>4&&(l.length=4,c=4);for(var a=0;a<c;a++){var h=l[a];if(o)if(a<3)h=h.replace(g,"");else if(h=h.replace(f,""),h.indexOf(":")!=-1){var v=h.split(":");h=v[0],t=v[1].replace(u,"").substring(0,5),(!t||t>65535)&&(n=!1)}else s&&(n=!1);h.length>1?(h=h.replace(u,"").substring(0,3),h>255&&(n=!1)):h||(n=!1),l[a]=h}return e=l.join("."),null!==t&&(e+=":"+t),r.$setValidity("ipAddress",n),r.$setViewValue(e),r.$render(),i[0].setSelectionRange(d,d),e}if(r){var o=!1,s=!1,u=new RegExp("^0","g"),p=new RegExp("^\\.","g"),w=new RegExp("\\.\\.+","g"),g=new RegExp(":","g"),f=new RegExp("^:","g"),d=0,v=!1;e.$watchCollection("config",t),i.bind("keydown",l),i.bind("keyup",c),i.bind("keypress",a),r.$parsers.push(h)}}}}angular.module("ng-ip-address",[]).directive("ngIpAddress",e)}();