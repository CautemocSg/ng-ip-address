!function(){"use strict";angular.module("ng-ip-address",[]).directive("ngIpAddress",function(){return{restrict:"A",require:"?ngModel",scope:{config:"=?ngIpConfig"},link:function(e,i,n,r){if(r){var t=!1,l=!1,c=new RegExp("^0","g"),h=new RegExp("^\\.","g"),o=new RegExp("\\.\\.+","g"),s=new RegExp(":","g"),a=new RegExp("^:","g"),u=0,p=!1;e.$watchCollection("config",function(e){e?(l="boolean"==typeof e.requirePort&&e.requirePort,t=l||"boolean"==typeof e.allowPort&&e.allowPort):(t=!1,l=!1),t||!r.$viewValue?r.$parsers[0](r.$viewValue):r.$setViewValue(r.$viewValue.replace(s,""))}),i.bind("keydown",function(e){17!==e.which&&91!==e.which||(p=!0)}),i.bind("keyup",function(e){17!==e.which&&91!==e.which||(p=!1)}),i.bind("keypress",function(e){(e.which<46&&0!==e.which&&8!==e.which&&13!==e.which||47===e.which||58===e.which&&!t||e.which>58&&(!p||99!==e.which&&118!==e.which&&120!==e.which))&&e.preventDefault()}),r.$parsers.push(function(e){if(!e)return r.$setValidity("ipAddress",!0),e;u=i[0].selectionStart;var n=!0,p=null,w=(e=(e=e.replace(h,"")).replace(o,".")).split("."),g=w.length;g<4?n=!1:g>4&&(w.length=4,g=4);for(var f=0;f<g;f++){var d=w[f];if(t)if(f<3)d=d.replace(s,"");else if(-1!==(d=d.replace(a,"")).indexOf(":")){var $=d.split(":");d=$[0],(!(p=$[1].replace(c,"").substring(0,5))||p>65535)&&(n=!1)}else l&&(n=!1);d.length>1?(d=d.replace(c,"").substring(0,3))>255&&(n=!1):d||(n=!1),w[f]=d}return e=w.join("."),null!==p&&(e+=":"+p),r.$setValidity("ipAddress",n),r.$setViewValue(e),r.$render(),i[0].setSelectionRange(u,u),e})}}}})}();